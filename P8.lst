SQL> CREATE TABLE TITULACION
  2  (T CHAR(4) PRIMARY KEY,
  3  FAC VARCHAR(30));

Table created.

SQL> INSERT INTO TITULACION(T,FAC)
  2  SELECT DISTINCT T, NULL AS FAC
  3  FROM ASIGNATURA;

4 rows created.

SQL> SELECT*
  2  FROM TITULACION;

T    FAC                                                                        
---- ------------------------------                                             
MII                                                                             
GM                                                                              
GII                                                                             
GF                                                                              

SQL> SELECT TABLE_NAME, CONSTRAINT_NAME
  2  FROM USER_CONSTRAINTS;

TABLE_NAME                                                                      
--------------------------------------------------------------------------------
CONSTRAINT_NAME                                                                 
--------------------------------------------------------------------------------
AREA                                                                            
SYS_C0017692                                                                    
                                                                                
PROFESOR                                                                        
SYS_C0017736                                                                    
                                                                                
ASIGNATURA                                                                      
SYS_C0017818                                                                    
                                                                                

TABLE_NAME                                                                      
--------------------------------------------------------------------------------
CONSTRAINT_NAME                                                                 
--------------------------------------------------------------------------------
ASIGNATURA                                                                      
SYS_C0017819                                                                    
                                                                                
ASIGNATURA                                                                      
SYS_C0017820                                                                    
                                                                                
ASIGNATURA                                                                      
SYS_C0017822                                                                    
                                                                                

TABLE_NAME                                                                      
--------------------------------------------------------------------------------
CONSTRAINT_NAME                                                                 
--------------------------------------------------------------------------------
PLAN_DOCENTE                                                                    
SYS_C0017850                                                                    
                                                                                
PLAN_DOCENTE                                                                    
SYS_C0017852                                                                    
                                                                                
PLAN_DOCENTE                                                                    
SYS_C0017853                                                                    
                                                                                

TABLE_NAME                                                                      
--------------------------------------------------------------------------------
CONSTRAINT_NAME                                                                 
--------------------------------------------------------------------------------
DEPARTAMENTO                                                                    
SYS_C0017662                                                                    
                                                                                
AREA                                                                            
SYS_C0017691                                                                    
                                                                                
PROFESOR                                                                        
SYS_C0017735                                                                    
                                                                                

TABLE_NAME                                                                      
--------------------------------------------------------------------------------
CONSTRAINT_NAME                                                                 
--------------------------------------------------------------------------------
ASIGNATURA                                                                      
SYS_C0017821                                                                    
                                                                                
PLAN_DOCENTE                                                                    
SYS_C0017851                                                                    
                                                                                
TITULACION                                                                      
SYS_C0025209                                                                    
                                                                                

15 rows selected.

SQL> UPDATE TITULACION
  2  SET FAC='ETSII'
  3  WHERE T IN('GII','MII');

2 rows updated.

SQL> UPDATE TITULACION
  2  SET FAC='FACULTAD_FISICA'
  3  WHERE T='GM';

1 row updated.

SQL> UPDATE TITULACION
  2  SET FAC='FACULTAD_MATEMATICAS'
  3  WHERE T='GM';

1 row updated.

SQL> UPDATE TITULACION
  2  SET FAC='FACULTAD_FISICA'
  3  WHERE T='GF';

1 row updated.

SQL> SELECT*
  2  FROM TITULACION;

T    FAC                                                                        
---- ------------------------------                                             
MII  ETSII                                                                      
GM   FACULTAD_MATEMATICAS                                                       
GII  ETSII                                                                      
GF   FACULTAD_FISICA                                                            

SQL> CREATE SYNONYM TIT FOR TITULACION;

Synonym created.

SQL> SELECT*
  2  FROM TIT;

T    FAC                                                                        
---- ------------------------------                                             
MII  ETSII                                                                      
GM   FACULTAD_MATEMATICAS                                                       
GII  ETSII                                                                      
GF   FACULTAD_FISICA                                                            

SQL> ALTER TABLE ASIGNATURA
  2  MODIFY T CHAR(4) REFERENCES TITULACION ON DELETE CASCADE;

Table altered.

SQL> ALTER TABLE TITULACION
  2  T CHAR(6);
T CHAR(6)
*
ERROR at line 2:
ORA-01735: invalid ALTER TABLE option 


SQL> CREATE VIEW VISTA1 AS CAS,A,T,CUR,CAR
  2  ;
CREATE VIEW VISTA1 AS CAS,A,T,CUR,CAR
                      *
ERROR at line 1:
ORA-00928: missing SELECT keyword 


SQL> CREATE VIEW VISTA1 AS SELECT * FROM ASIGNATURA;

View created.

SQL> CREATE VIEW VISTA1 AS SELECT CAS,A,T,CUR,CAR
  2  FROM ASIGNATURA;
CREATE VIEW VISTA1 AS SELECT CAS,A,T,CUR,CAR
            *
ERROR at line 1:
ORA-00955: name is already used by an existing object 


SQL> DROP VIEW VISTA1;

View dropped.

SQL> CREATE VIEW VISTA1 AS SELECT CAS,A,T,CUR,CAR
  2  FROM ASIGNATURA;

View created.

SQL> SELECT *
  2  FROM VISTA1;

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         1 BASES DE DATOS                                     GII           3   
         7                                                                      
                                                                                
         2 INTELIGENCIA ARTIFICIAL                            GII           3   
         4                                                                      
                                                                                
         3 ALMACENES DE DATOS                                 MII           1   
         7                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         4 MINERIA DE DATOS                                   MII           1   
         7                                                                      
                                                                                
         5 INFORMATICA BASICA                                 GII           1   
         7                                                                      
                                                                                
         6 ALGEBRA                                            GII           1   
         1                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         7 CALCULO                                            GII           1   
         8                                                                      
                                                                                
         8 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                
         9 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
        10 ASTRONOMIA                                         GF            2   
         3                                                                      
                                                                                
        11 ENSENANZA DE LA MATEMATICA                         GM            2   
         5                                                                      
                                                                                
        12 ANALISIS COMPLEJO                                  GM            4   
         2                                                                      
                                                                                

12 rows selected.

SQL> INSERT INTO VISTA1
  2  VALUES(13,'ESTADISTICA','GII',3,7);

1 row created.

SQL> SELECT *
  2  FROM VISTA1;

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         1 BASES DE DATOS                                     GII           3   
         7                                                                      
                                                                                
         2 INTELIGENCIA ARTIFICIAL                            GII           3   
         4                                                                      
                                                                                
         3 ALMACENES DE DATOS                                 MII           1   
         7                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         4 MINERIA DE DATOS                                   MII           1   
         7                                                                      
                                                                                
         5 INFORMATICA BASICA                                 GII           1   
         7                                                                      
                                                                                
         6 ALGEBRA                                            GII           1   
         1                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         7 CALCULO                                            GII           1   
         8                                                                      
                                                                                
         8 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                
         9 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
        10 ASTRONOMIA                                         GF            2   
         3                                                                      
                                                                                
        11 ENSENANZA DE LA MATEMATICA                         GM            2   
         5                                                                      
                                                                                
        12 ANALISIS COMPLEJO                                  GM            4   
         2                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
        13 ESTADISTICA                                        GII           3   
         7                                                                      
                                                                                

13 rows selected.

SQL> SELECT *
  2  FROM ASIGNATURAS;
FROM ASIGNATURAS
     *
ERROR at line 2:
ORA-00942: table or view does not exist 


SQL> SELECT *
  2  FROM ASIGNATURA;

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR         CT         CP         CL                                     
---------- ---------- ---------- ----------                                     
         1 BASES DE DATOS                                     GII           3   
         7          3        1.5        1.5                                     
                                                                                
         2 INTELIGENCIA ARTIFICIAL                            GII           3   
         4        1.5        1.5          3                                     
                                                                                
         3 ALMACENES DE DATOS                                 MII           1   
         7        1.5          0        1.5                                     
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR         CT         CP         CL                                     
---------- ---------- ---------- ----------                                     
         4 MINERIA DE DATOS                                   MII           1   
         7        1.5          0        1.5                                     
                                                                                
         5 INFORMATICA BASICA                                 GII           1   
         7          3        1.5        1.5                                     
                                                                                
         6 ALGEBRA                                            GII           1   
         1          3          3          0                                     
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR         CT         CP         CL                                     
---------- ---------- ---------- ----------                                     
         7 CALCULO                                            GII           1   
         8          3          3          0                                     
                                                                                
         8 OPTIMIZACION                                       GII           1   
         6          3        1.5        1.5                                     
                                                                                
         9 GESTION DE RIESGOS                                 GII           3   
         4          3          0          3                                     
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR         CT         CP         CL                                     
---------- ---------- ---------- ----------                                     
        10 ASTRONOMIA                                         GF            2   
         3          3        1.5        1.5                                     
                                                                                
        11 ENSENANZA DE LA MATEMATICA                         GM            2   
         5          6          0          0                                     
                                                                                
        12 ANALISIS COMPLEJO                                  GM            4   
         2        4.5          3          0                                     
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR         CT         CP         CL                                     
---------- ---------- ---------- ----------                                     
        13 ESTADISTICA                                        GII           3   
         7          0          0          0                                     
                                                                                

13 rows selected.

SQL> UPDATE VISTA1
  2  SET CAR=6
  3  WHERE CAS=13;

1 row updated.

SQL> SELECT *
  2  FROM VISTA1;

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         1 BASES DE DATOS                                     GII           3   
         7                                                                      
                                                                                
         2 INTELIGENCIA ARTIFICIAL                            GII           3   
         4                                                                      
                                                                                
         3 ALMACENES DE DATOS                                 MII           1   
         7                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         4 MINERIA DE DATOS                                   MII           1   
         7                                                                      
                                                                                
         5 INFORMATICA BASICA                                 GII           1   
         7                                                                      
                                                                                
         6 ALGEBRA                                            GII           1   
         1                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
         7 CALCULO                                            GII           1   
         8                                                                      
                                                                                
         8 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                
         9 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
        10 ASTRONOMIA                                         GF            2   
         3                                                                      
                                                                                
        11 ENSENANZA DE LA MATEMATICA                         GM            2   
         5                                                                      
                                                                                
        12 ANALISIS COMPLEJO                                  GM            4   
         2                                                                      
                                                                                

       CAS A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
        13 ESTADISTICA                                        GII           3   
         6                                                                      
                                                                                

13 rows selected.

SQL> CREATE VIEW VISTA2 AS SELECT DNI,A,T,CUR,CAR
  2  FROM PLAN_DOCENTE NATURAL JOIN VISTA1 ORDER BY DNI ASC;

View created.

SQL> SELECT * FROM VISTA2;

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      1010 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                
      1010 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                
      1010 INTELIGENCIA ARTIFICIAL                            GII           3   
         4                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      1111 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                
      1111 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                
      2020 ALMACENES DE DATOS                                 MII           1   
         7                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      2222 MINERIA DE DATOS                                   MII           1   
         7                                                                      
                                                                                
      2222 ALMACENES DE DATOS                                 MII           1   
         7                                                                      
                                                                                
      3030 OPTIMIZACION                                       GII           1   
         6                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      3333 INTELIGENCIA ARTIFICIAL                            GII           3   
         4                                                                      
                                                                                
      3333 GESTION DE RIESGOS                                 GII           3   
         4                                                                      
                                                                                
      4444 INFORMATICA BASICA                                 GII           1   
         7                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      4444 MINERIA DE DATOS                                   MII           1   
         7                                                                      
                                                                                
      4444 BASES DE DATOS                                     GII           3   
         7                                                                      
                                                                                
      5555 ALGEBRA                                            GII           1   
         1                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      6666 ASTRONOMIA                                         GF            2   
         3                                                                      
                                                                                
      7777 ANALISIS COMPLEJO                                  GM            4   
         2                                                                      
                                                                                
      8888 ENSENANZA DE LA MATEMATICA                         GM            2   
         5                                                                      
                                                                                

       DNI A                                                  T           CUR   
---------- -------------------------------------------------- ---- ----------   
       CAR                                                                      
----------                                                                      
      9999 CALCULO                                            GII           1   
         8                                                                      
                                                                                

19 rows selected.

SQL> SPOOL OFF
SQL> UPDATE VISTA2
  2  SET A='INGLES'
  3  WHERE A='OPTIMIZACION';
SET A='INGLES'
    *
ERROR at line 2:
ORA-01779: cannot modify a column which maps to a non key-preserved table 


SQL> UPDATE VISTA2
  2  SET A='CONTROL DE CALIDAD'
  3  WHERE A='ALMACENES DE DATOS';
SET A='CONTROL DE CALIDAD'
    *
ERROR at line 2:
ORA-01779: cannot modify a column which maps to a non key-preserved table 


SQL> DESCRIBE VISTA2;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 DNI                                       NOT NULL NUMBER(8)
 A                                         NOT NULL VARCHAR2(50)
 T                                         NOT NULL CHAR(4)
 CUR                                                NUMBER(1)
 CAR                                                NUMBER(3)

SQL> DROP VIEW VISTA1;

View dropped.

SQL> SELECT *
  2  FROM VISTA2;
FROM VISTA2
     *
ERROR at line 2:
ORA-04063: view "ALU0100888041.VISTA2" has errors 


SQL> ROLLBACK;

Rollback complete.

SQL> CREATE INDEX INDICE1 ON PROFESOR(P);

Index created.

SQL> SELECT DNI FROM PROFESOR
  2  WHERE P='JUAN';

       DNI                                                                      
----------                                                                      
      1111                                                                      

SQL> DROP INDEX INDICE1;

Index dropped.

SQL> CREATE INDEX INDICE2 ON VISTA1(CAR);
CREATE INDEX INDICE2 ON VISTA1(CAR)
                        *
ERROR at line 1:
ORA-00942: table or view does not exist 


SQL> CREATE VIEW VISTA1
  2  AS SELECT CAS,A,T,CUR,CAR
  3  FROM ASIGNATURA;

View created.

SQL> CREATE INDEX INDICE2 ON VISTA1(CAR);
CREATE INDEX INDICE2 ON VISTA1(CAR)
                        *
ERROR at line 1:
ORA-01702: a view is not appropriate here 


SQL> GRANT SELECT ON DEPARTAMENTO TO alumno;

Grant succeeded.

SQL> GRANT SELECT ON AREA TO alumno;

Grant succeeded.

SQL> GRANT SELECT ON ASIGNATURA TO alumno;

Grant succeeded.

SQL> GRANT SELECT ON TITULACION TO alumno;

Grant succeeded.

SQL> GRANT INSERT, UPDATE, DELETE ON DEPARTAMENTO TO alumno;

Grant succeeded.

SQL> GRANT INSERT, UPDATE, DELETE ON AREA TO alumno;

Grant succeeded.

SQL> GRANT UPDATE ON ASIGNATURA TO alumno;

Grant succeeded.

SQL> GRANT UPDATE ON TITULACION TO alumno;

Grant succeeded.

SQL> COMMIT;

Commit complete.

SQL> CONNECT
Enter user-name: alumno
ERROR:
ORA-12162: TNS:net service name is incorrectly specified 


Warning: You are no longer connected to ORACLE.
SQL> SPOOL OFF
